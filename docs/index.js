(function(e){function t(t){for(var n,o,c=t[0],s=t[1],l=t[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,c=1;c<i.length;c++){var s=i[c];0!==a[s]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},a={index:0},r=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"phina-wrap"},[i("PhinaCanvas")],1)])},r=[],o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},c=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"phina-canvas-root"}},[i("canvas",{attrs:{id:"phina-canvas"}})])}],s=i("922f"),l=i("d4ec"),u=i("262e"),h=i("2caf"),d={common:{image:{fighter:"assets/textures/fighter.png",particle:"assets/textures/particle.png",background:"assets/textures/background.jpg"}}},f=i("bee2");function y(){return Array.prototype.forEach.call(arguments,(function(e){for(var t in e)void 0===this[t]&&(this[t]=e[t])}),this),this}var p=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;return Object(l["a"])(this,i),e=y.call({},e,i.defaults),n=t.call(this,e),n.backgroundColor=e.backgroundColor,n.fromJSON({children:{titleLabel:{className:s["f"],arguments:{text:e.title,fill:e.fontColor,stroke:!1,fontSize:64},x:n.gridX.center(),y:n.gridY.span(4)}}}),"touch"===e.exitType&&n.fromJSON({children:{touchLabel:{className:s["f"],arguments:{text:"TOUCH START",fill:e.fontColor,stroke:!1,fontSize:32},x:n.gridX.center(),y:n.gridY.span(12)}}}),n}return Object(f["a"])(i,[{key:"update",value:function(e){e.pointer.getPointingStart()&&this.exit()}}]),i}(s["d"]);p.defaults={title:"phina.js games",message:"",fontColor:"white",backgroundColor:"hsl(200, 80%, 64%)",backgroundImage:"",exitType:"touch"};var v=i("257e"),b=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;return Object(l["a"])(this,i),e=y.call({},e,{world:null,width:16,height:16}),n=t.call(this,e),n.world=e.world,n.collision=new s["k"]({width:e.width,height:e.height}).addChildTo(Object(v["a"])(n)),n.collision.alpha=0,n.time=0,n.on("enterframe",(function(){return n.time++})),n}return Object(f["a"])(i,[{key:"update",value:function(e){}}]),i}(s["c"]),m=i("ade3"),g=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;Object(l["a"])(this,i),n=t.call(this,"particle",16,16),n.blendMode="lighter",n.velocity=e.velocity||new s["m"](0,0);var a=e.scale||i.defaults.scale;return n.scaleX=a,n.scaleY=a,n.scaleDecay=e.scaleDecay||i.defaults.scaleDecay,n}return Object(f["a"])(i,[{key:"update",value:function(){this.position.add(this.velocity),this.velocity.x*=.99,this.velocity.y*=.99,this.scaleX-=this.scaleDecay,this.scaleY-=this.scaleDecay,this.scaleX<0&&this.remove()}},{key:"setVelocity",value:function(e,t){return e instanceof s["m"]?(this.velocity=e.clone(),this):(this.velocity.x=e,this.velocity.y=t,this)}}]),i}(s["l"]);Object(m["a"])(g,"defaults",{scale:1,scaleDecay:.01});var x=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;return Object(l["a"])(this,i),n=t.call(this,e),n.offset=new s["m"](0,0),n.velocity=new s["m"](0,0),n.isDisable=!0,n.before=null,n}return Object(f["a"])(i,[{key:"setLayer",value:function(e){return this.layer=e,this}},{key:"enable",value:function(){return this.isDisable=!1,this}},{key:"disable",value:function(){return this.isDisable=!0,this}},{key:"setOffset",value:function(e,t){return e instanceof s["m"]?(this.offset.set(e.x,e.y),this):(this.offset.set(e,t),this)}},{key:"setVelocity",value:function(e,t){return e instanceof s["m"]?(this.velocity=e.clone().mul(-1),this):(this.velocity.x=e,this.velocity.y=t,this)}},{key:"update",value:function(){if(this.isDisable)this.before=null;else{var e=this.target,t={scale:.3},i=e.position.clone().add(this.offset);if(this.before){for(var n=e.position.distance(this.before),a=Math.max(Math.floor(n/3),6),r=1/a,o=0;o<a;o++){var c=r*o,l=new s["m"](i.x*c+this.before.x*(1-c),i.y*c+this.before.y*(1-c));new g(t).setPosition(l.x,l.y).addChildTo(this.layer)}this.before.set(i.x,i.y)}else this.before=new s["m"](i.x,i.y)}}}]),i}(s["a"]),O={width:960,height:640},j={num:7,foreGround:6,effectForeground:5,player:4,enemy:3,effectBackground:2,background:1,map:0},w=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;Object(l["a"])(this,i),e=y.call({},e,{width:32,height:32}),n=t.call(this,e),n.sprite=new s["l"]("fighter",32,32).setFrameIndex(0).addChildTo(Object(v["a"])(n)),n.afterBanner=[],n.direction=0,n.speed=1,n.velocity=new s["m"](0,0);for(var a=0;a<2;a++)n.afterBanner[a]=(new x).setLayer(n.world.mapLayer[j.effectBackground]).disable().attachTo(Object(v["a"])(n));return n}return Object(f["a"])(i,[{key:"update",value:function(){for(var e=s["i"].degToRad(22.5*this.direction),t=8*-Math.sin(e),i=8*Math.cos(e),n=0;n<2;n++){var a=k[this.direction][n].x,r=k[this.direction][n].y;this.afterBanner[n].setOffset(t+a,i+r)}}}]),i}(b),k=[[{x:-3,y:0},{x:3,y:0}],[{x:-3,y:2},{x:3,y:-2}],[{x:-3,y:2},{x:2,y:0}],[{x:-3,y:3},{x:0,y:-1}],[{x:0,y:0},{x:0,y:0}],[{x:-3,y:0},{x:3,y:0}],[{x:-1,y:-2},{x:2,y:2}],[{x:-3,y:-2},{x:3,y:0}],[{x:3,y:0},{x:-3,y:0}],[{x:3,y:-2},{x:-3,y:0}],[{x:1,y:-2},{x:-2,y:2}],[{x:3,y:0},{x:-3,y:0}],[{x:0,y:0},{x:0,y:0}],[{x:-3,y:3},{x:0,y:-1}],[{x:3,y:2},{x:-2,y:0}],[{x:3,y:2},{x:-3,y:-2}]],C=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;return Object(l["a"])(this,i),n=t.call(this,e),n.setup(),n.time=0,n}return Object(f["a"])(i,[{key:"update",value:function(e){this.controlPlayer(e),this.time++}},{key:"setup",value:function(){this.mapBase=(new s["c"]).setPosition(0,0).addChildTo(this),this.mapLayer=[];for(var e=0;e<j.num;e++)this.mapLayer[e]=(new s["c"]).addChildTo(this.mapBase);this.player=new w({world:this}).setPosition(O.width/2,O.height/2-100).addChildTo(this.mapLayer[j.player]),this.setupMap()}},{key:"setupMap",value:function(){for(var e=0;e<1e3;e++)new s["k"]({width:s["j"].randint(50,200),height:s["j"].randint(50,200),fill:"blue",stroke:"#aaa",strokeWidth:4,cornerRadius:0,x:s["j"].randint(-1e4,1e4),y:s["j"].randint(-5e3,5e3)}).addChildTo(this.mapLayer[j.background])}},{key:"controlPlayer",value:function(e){var t=this.player,i=e.keyboard;if(this.time%3===0)if(i.getKey(s["e"].KEY_CODE["left"])?(t.direction--,t.direction<0&&(t.direction=15)):i.getKey(s["e"].KEY_CODE["right"])&&(t.direction++,t.direction>15&&(t.direction=0)),t.sprite.setFrameIndex(t.direction),i.getKey(s["e"].KEY_CODE["up"])){t.speed+=.1,t.speed>1&&(t.speed=1);var n=s["i"].degToRad(22.5*t.direction);t.velocity.x+=Math.sin(n)*t.speed,t.velocity.y+=-Math.cos(n)*t.speed,t.velocity.length>2&&(t.velocity.normalize(),t.velocity.mul(2))}else t.speed*=.98;if(i.getKey(s["e"].KEY_CODE["up"])||(t.velocity.y+=.1),t.position.add(t.velocity),t.velocity.mul(.99),i.getKey(s["e"].KEY_CODE["up"])){var a=t.velocity.clone().mul(-1);t.afterBanner[0].enable().setVelocity(a),t.afterBanner[1].enable().setVelocity(a)}else t.afterBanner[0].disable(),t.afterBanner[1].disable();i.a,this.mapBase.x=O.width/2-t.x-3*t.velocity.x,this.mapBase.y=O.height/2-t.y-3*t.velocity.y}}]),i}(s["c"]),E=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){return Object(l["a"])(this,i),t.call(this,y.call({},e,{width:O.width,height:O.height,backgroundColor:"transparent"}))}return Object(f["a"])(i,[{key:"update",value:function(e){}}]),i}(s["d"]),T=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;return Object(l["a"])(this,i),n=t.call(this,y.call({},e,{width:O.width,height:O.height,backgroundColor:"black"})),n.world=(new C).addChildTo(Object(v["a"])(n)),n}return Object(f["a"])(i,[{key:"update",value:function(e){}}]),i}(E),D=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(){return Object(l["a"])(this,i),t.call(this,{startLabel:"loading",scenes:[{label:"loading",className:s["g"],nextLabel:"title",arguments:{assets:d.common}},{label:"title",className:p,nextLabel:"main",arguments:{title:"MANEUVER"}},{label:"main",className:T,nextLabel:"title"}]})}return i}(s["h"]),M=function(e){Object(u["a"])(i,e);var t=Object(h["a"])(i);function i(e){var n;return Object(l["a"])(this,i),n=t.call(this,e),e.parent&&(n.parentDomElement=document.getElementById(e.parent),console.log("parentElement",n.parentDomElement),n.fitScreen()),n}return Object(f["a"])(i,[{key:"fitScreen",value:function(e){e=void 0===e||e;var t=function(){var e=this.domElement,t=e.style;t.position="absolute",t.margin="auto",t.left="0px",t.top="0px",t.bottom="0px",t.right="0px";var i=this.parentDomElement||window,n=e.width/(i.innerWidth||i.clientWidth),a=e.height/(i.innerHeight||i.clientHeight),r=e.height/e.width,o=i.clientWidth,c=i.clientHeight;n>a?(t.width=Math.floor(o)+"px",t.height=Math.floor(o*r)+"px"):(t.width=Math.floor(c/r)+"px",t.height=Math.floor(c)+"px")}.bind(this);t(),e&&parent.addEventListener("resize",t,!1)}}]),i}(s["b"]),_={data:function(){return{}},beforeCreate:function(){s["n"].main((function(){var e={width:960,height:640,fps:60,query:"#phina-canvas",parent:"phina-canvas-root",fit:!1},t=new M(e);t.replaceScene(new D),t.run()}))},mounted:function(){}},P=_,S=(i("82fa"),i("2877")),B=Object(S["a"])(P,o,c,!1,null,"75104550",null),L=B.exports,K={components:{PhinaCanvas:L}},Y=K,N=(i("5c0b"),Object(S["a"])(Y,a,r,!1,null,null,null)),R=N.exports,V=i("2f62");n["a"].use(V["a"]);var X={},z=new V["a"].Store({state:X,mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,s["d"].defaults.width=960,s["d"].defaults.height=640,window.vueApp=new n["a"]({store:z,render:function(e){return e(R)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";i("9c0c")},"82fa":function(e,t,i){"use strict";i("9cd7")},"9c0c":function(e,t,i){},"9cd7":function(e,t,i){}});