(function(e){function t(t){for(var i,o,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);h&&h(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},n={index:0},r=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var h=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"phina-wrap"},[a("PhinaCanvas")],1)])},r=[],o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"phina-canvas-root"}},[a("canvas",{attrs:{id:"phina-canvas"}})])}],l=a("922f"),c=a("d4ec"),h=a("262e"),u=a("2caf"),d={common:{image:{fighter:"assets/textures/fighter.png",particle:"assets/textures/particle.png",background:"assets/textures/background.jpg"}}},f=a("bee2"),y=a("ade3"),p=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),e=l["k"].$safe.call({},e,a.defaults),i=t.call(this,e),i.backgroundColor=e.backgroundColor,i.fromJSON({children:{titleLabel:{className:l["g"],arguments:{text:e.title,fill:e.fontColor,stroke:!1,fontSize:64},x:i.gridX.center(),y:i.gridY.span(4)}}}),"touch"===e.exitType&&i.fromJSON({children:{touchLabel:{className:l["g"],arguments:{text:"TOUCH OR SPACE",fill:e.fontColor,stroke:!1,fontSize:32},x:i.gridX.center(),y:i.gridY.span(12)}}}),i}return Object(f["a"])(a,[{key:"update",value:function(e){(e.pointer.getPointingStart()||e.keyboard.getKey(l["f"].KEY_CODE["z"]))&&this.exit()}}]),a}(l["d"]);Object(y["a"])(p,"defaults",{title:"phina.js games",message:"",fontColor:"white",backgroundColor:"hsl(200, 80%, 64%)",backgroundImage:"",exitType:"touch"});var v=a("257e"),g=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),e=l["k"].$safe.call({},e,a.defaults),i=t.call(this,e),i.world=e.world,i.sprite=null,i.collision=new l["c"]({width:e.width,height:e.height}).addChildTo(Object(v["a"])(i)),i.isCollision=!0,i.isGravity=!0,i.accelerator=1,i.velocity=new l["o"](0,0),i.time=0,i.on("enterframe",(function(){if(i.isGravity){var e=i.world?i.world.gravity:.1;i.velocity.y+=e}i.position.add(i.velocity),i.velocity.mul(.99),i.time++})),i.on("removed",(function(){return i.destroy()})),i}return Object(f["a"])(a,[{key:"update",value:function(e){}},{key:"setSprite",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.sprite&&this.image.remove(),this.sprite=new l["n"](e,t,a).addChildTo(this),this}},{key:"setVelocity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e instanceof l["o"]?(this.velocity=e.clone(),this):(this.velocity.x=e,this.velocity.y=t,this)}},{key:"setCollision",value:function(e,t){return this.collision.width=e,this.collision.height=t,this}},{key:"destroy",value:function(){}}]),a}(l["c"]);Object(y["a"])(g,"defaults",{world:null,width:16,height:16});var b=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;Object(c["a"])(this,a),e=l["k"].$safe.call({},e,a.defaults),i=t.call(this,e.sprite.assetName,e.sprite.width,e.sprite.height),i.blendMode=e.blendMode||"lighter";var n=e.scale;return n instanceof l["o"]?i.scale.set(n.x,n.y):i.scale.set(n,n),i.velocity=new l["o"](0,0),i.scaleDecay=new l["o"](.92,.92),i.setScaleDecay(e.scaleDecay),i.lifeSpan=e.lifeSpan,i}return Object(f["a"])(a,[{key:"update",value:function(){this.position.add(this.velocity),this.velocity.mul(.99),this.scale.x*=this.scaleDecay.x,this.scale.y*=this.scaleDecay.y,(this.scale.x<.01||this.scale.y<.01)&&this.remove(),this.lifeSpan--,0===this.lifeSpan&&this.remove()}},{key:"setVelocity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e instanceof l["o"]?(this.velocity=e.clone(),this):(this.velocity.x=e,this.velocity.y=t,this)}},{key:"setScaleDecay",value:function(e){return e instanceof l["o"]?this.scaleDecay.set(e.x,e.y):this.scaleDecay.set(e,e),this}}]),a}(l["n"]);Object(y["a"])(b,"defaults",{type:"sphere",scale:1,scaleDecay:.92,blendMode:"lighter",lifeSpan:100,sprite:{assetName:"particle",width:16,height:16}});var m=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),i=t.call(this,e),i.offset=new l["o"](0,0),i.velocity=new l["o"](0,0),i.isDisable=!0,i.before=null,i}return Object(f["a"])(a,[{key:"setLayer",value:function(e){return this.layer=e,this}},{key:"enable",value:function(){return this.isDisable=!1,this}},{key:"disable",value:function(){return this.isDisable=!0,this}},{key:"setOffset",value:function(e,t){return e instanceof l["o"]?(this.offset.set(e.x,e.y),this):(this.offset.set(e,t),this)}},{key:"setVelocity",value:function(e,t){return e instanceof l["o"]?(this.velocity=e.clone().mul(-1),this):(this.velocity.set(e,t),this)}},{key:"update",value:function(){if(this.isDisable)this.before=null;else{var e=this.target,t={scale:.3},a=e.position.clone().add(this.offset);if(this.before){for(var i=e.position.distance(this.before),n=Math.max(Math.floor(i/3),6),r=1/n,o=0;o<n;o++){var s=r*o,c=new l["o"](a.x*s+this.before.x*(1-s),a.y*s+this.before.y*(1-s));new b(t).setPosition(c.x,c.y).addChildTo(this.layer)}this.before.set(a.x,a.y)}else this.before=new l["o"](a.x,a.y)}}}]),a}(l["a"]),x={width:960,height:640},O={num:7,foreGround:6,effectForeground:5,player:4,enemy:3,effectBackground:2,background:1,map:0},w=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;Object(c["a"])(this,a),e=l["k"].$safe.call({},e,{width:32,height:32}),i=t.call(this,e),i.setSprite("fighter",32,32),i.sprite.setFrameIndex(0),i.angle=0,i.afterBanner=[];for(var n=0;n<2;n++)i.afterBanner[n]=(new m).setLayer(i.world.mapLayer[O.effectBackground]).disable().attachTo(Object(v["a"])(i));return i.controlInterval=0,i.shotInterval=0,i}return Object(f["a"])(a,[{key:"update",value:function(e){for(var t=l["j"].degToRad(22.5*this.angle),a=8*-Math.sin(t),i=8*Math.cos(t),n=0;n<2;n++){var r=j[this.angle][n].x,o=j[this.angle][n].y;this.afterBanner[n].setOffset(a+r,i+o)}this.control(e)}},{key:"control",value:function(e){var t=this,a=e.controller,i=a.up?this.controlInterval>6:this.controlInterval>3;if(i&&(a.left?(t.angle--,t.angle<0&&(t.angle=15),this.controlInterval=0):a.right&&(t.angle++,t.angle>15&&(t.angle=0),this.controlInterval=0),t.sprite.setFrameIndex(t.angle)),a.up){t.accelerator+=.002,t.accelerator>1&&(t.accelerator=1);var n=l["j"].degToRad(22.5*t.angle);t.velocity.x+=Math.sin(n)*t.accelerator,t.velocity.y+=-Math.cos(n)*t.accelerator,t.velocity.length>2&&(t.velocity.normalize(),t.velocity.mul(2))}else t.accelerator*=.98;if(t.isGravity=!a.up,a.up){var r=t.velocity.clone().mul(-1);t.afterBanner[0].enable().setVelocity(r),t.afterBanner[1].enable().setVelocity(r)}else t.afterBanner[0].disable(),t.afterBanner[1].disable();a.a&&this.shotInterval>12&&(this.world.enterShot(this),this.shotInterval=0),a.b&&this.shotInterval>20&&(this.world.enterLaser(this),this.shotInterval=0),this.controlInterval++,this.shotInterval++}}]),a}(g),j=[[{x:-3,y:0},{x:3,y:0}],[{x:-4,y:1},{x:1,y:3}],[{x:-2,y:0},{x:2,y:2}],[{x:-3,y:3},{x:0,y:-1}],[{x:0,y:0},{x:0,y:0}],[{x:-3,y:0},{x:3,y:0}],[{x:-1,y:0},{x:2,y:1}],[{x:-3,y:1},{x:3,y:0}],[{x:-3,y:0},{x:3,y:0}],[{x:-3,y:2},{x:3,y:0}],[{x:-2,y:2},{x:1,y:-2}],[{x:-3,y:0},{x:3,y:0}],[{x:0,y:0},{x:0,y:0}],[{x:-3,y:3},{x:0,y:-1}],[{x:-2,y:2},{x:2,y:1}],[{x:-3,y:1},{x:3,y:0}]],k=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),i=t.call(this,e),i.setSprite("particle",16,16),i.isGravity=!1,i.lifeSpan=60,i}return Object(f["a"])(a,[{key:"update",value:function(){this.time>this.lifeSpan&&this.remove()}}]),a}(g),K=a("45eb"),S=a("7e84"),C=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;Object(c["a"])(this,a),i=t.call(this,e);var n={width:3,height:1e3,fill:"blue",stroke:"blue",strokeWidth:1,cornerRadius:0};return i.sprite=new l["m"](n).setPosition(0,-6).setOrigin(.5,1).addChildTo(Object(v["a"])(i)),i.isGravity=!1,i.shooter=e.shooter,i.lifeSpan=10,i}return Object(f["a"])(a,[{key:"update",value:function(){this.time>this.lifeSpan&&this.remove(),this.shooter&&(this.setPosition(this.shooter.x,this.shooter.y),this.rotation=22.5*this.shooter.angle)}},{key:"destroy",value:function(){this.sprite.canvas.width=0,this.sprite.canvas.height=0,this.sprite.remove(),Object(K["a"])(Object(S["a"])(a.prototype),"destroy",this).call(this)}}]),a}(g),M=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),i=t.call(this,e),i.setup(),i.gravity=.1,i}return Object(f["a"])(a,[{key:"setup",value:function(){this.mapBase=(new l["c"]).setPosition(0,0).addChildTo(this),this.mapLayer=[];for(var e=0;e<O.num;e++)this.mapLayer[e]=(new l["c"]).addChildTo(this.mapBase);this.player=new w({world:this}).setPosition(x.width/2,x.height/2-100).addChildTo(this.mapLayer[O.player]),this.setupMap()}},{key:"setupMap",value:function(){for(var e=0;e<1e3;e++)new l["m"]({width:l["l"].randint(50,200),height:l["l"].randint(50,200),fill:"blue",stroke:"#aaa",strokeWidth:4,cornerRadius:0,x:l["l"].randint(-1e4,1e4),y:l["l"].randint(-5e3,5e3)}).addChildTo(this.mapLayer[O.background])}},{key:"enterShot",value:function(e){var t=new k({world:this}).setPosition(e.x,e.y).setVelocity(1,0).addChildTo(this.mapLayer[O.player]),a=l["j"].degToRad(22.5*e.angle);t.velocity.x+=30*Math.sin(a),t.velocity.y+=30*-Math.cos(a)}},{key:"enterLaser",value:function(e){var t=new C({world:this,shooter:e}).setPosition(e.x,e.y).setVelocity(1,0).addChildTo(this.mapLayer[O.player]);t.rotation=22.5*e.angle}},{key:"update",value:function(){this.mapBase.x=x.width/2-this.player.x-3*this.player.velocity.x,this.mapBase.y=x.height/2-this.player.y-3*this.player.velocity.y}}]),a}(l["c"]),T=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){return Object(c["a"])(this,a),t.call(this,l["k"].$safe.call({},e,a.defaults))}return Object(f["a"])(a,[{key:"update",value:function(e){}}]),a}(l["d"]);Object(y["a"])(T,"defaults",{width:x.width,height:x.height,backgroundColor:"transparent"});var D=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),e=l["k"].$safe.call({},e,a.defaults),i=t.call(this,e),i.world=(new M).addChildTo(Object(v["a"])(i)),i}return Object(f["a"])(a,[{key:"update",value:function(e){}}]),a}(T);Object(y["a"])(D,"defaults",{width:x.width,height:x.height,backgroundColor:"black"});var L=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(c["a"])(this,a),t.call(this,{startLabel:"loading",scenes:[{label:"loading",className:l["h"],nextLabel:"title",arguments:{assets:d.common}},{label:"title",className:p,nextLabel:"main",arguments:{title:"MANEUVER"}},{label:"main",className:D,nextLabel:"title"}]})}return a}(l["i"]),P=function(e){Object(h["a"])(a,e);var t=Object(u["a"])(a);function a(e){var i;return Object(c["a"])(this,a),i=t.call(this,e),e.parent&&(i.parentDomElement=document.getElementById(e.parent),console.log("parentElement",i.parentDomElement),i.fitScreen()),i.gamepadManager=new l["e"],i.gamepad=i.gamepadManager.get(0),i.controller={},i.on("enterframe",(function(){return i.updateController()})),i}return Object(f["a"])(a,[{key:"fitScreen",value:function(e){e=void 0===e||e;var t=function(){var e=this.domElement,t=e.style;t.position="absolute",t.margin="auto",t.left="0px",t.top="0px",t.bottom="0px",t.right="0px";var a=this.parentDomElement||window,i=e.width/(a.innerWidth||a.clientWidth),n=e.height/(a.innerHeight||a.clientHeight),r=e.height/e.width,o=a.clientWidth,s=a.clientHeight;i>n?(t.width=Math.floor(o)+"px",t.height=Math.floor(o*r)+"px"):(t.width=Math.floor(s/r)+"px",t.height=Math.floor(s)+"px")}.bind(this);t(),e&&parent.addEventListener("resize",t,!1)}},{key:"updateController",value:function(){this.gamepadManager.update();var e=this.controller;e.before=null;var t=this.gamepad,a=this.keyboard,i=t.getKeyAngle(),n=a.getKeyAngle();this.controller={angle:null!==i?i:n,up:t.getKey("up")||a.getKey("up"),down:t.getKey("down")||a.getKey("down"),left:t.getKey("left")||a.getKey("left"),right:t.getKey("right")||a.getKey("right"),attack:t.getKey("A")||a.getKey("X"),jump:t.getKey("X")||a.getKey("Z"),menu:t.getKey("start")||a.getKey("escape"),a:t.getKey("A")||a.getKey("Z"),b:t.getKey("B")||a.getKey("X"),x:t.getKey("X")||a.getKey("C"),y:t.getKey("Y")||a.getKey("V"),ok:t.getKey("A")||a.getKey("Z")||a.getKey("space")||a.getKey("return"),cancel:t.getKey("B")||a.getKey("X")||a.getKey("escape"),start:t.getKey("start")||a.getKey("return"),select:t.getKey("select"),pause:t.getKey("start")||a.getKey("escape"),analog1:t.getStickDirection(0),analog2:t.getStickDirection(1),before:e}}}]),a}(l["b"]),B={data:function(){return{}},beforeCreate:function(){l["p"].main((function(){var e={width:960,height:640,fps:60,query:"#phina-canvas",parent:"phina-canvas-root",fit:!1},t=new P(e);t.replaceScene(new L),t.run()}))},mounted:function(){}},I=B,E=(a("82fa"),a("2877")),_=Object(E["a"])(I,o,s,!1,null,"75104550",null),N=_.exports,$={components:{PhinaCanvas:N}},V=$,A=(a("5c0b"),Object(E["a"])(V,n,r,!1,null,null,null)),R=A.exports,X=a("2f62");i["a"].use(X["a"]);var G={},z=new X["a"].Store({state:G,mutations:{},actions:{},modules:{}});i["a"].config.productionTip=!1,l["d"].defaults.width=960,l["d"].defaults.height=640,window.vueApp=new i["a"]({store:z,render:function(e){return e(R)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"82fa":function(e,t,a){"use strict";a("9cd7")},"9c0c":function(e,t,a){},"9cd7":function(e,t,a){}});